<app-loading-spinner *ngIf="isLoading"></app-loading-spinner>
<div class="main">
    <div class="mainContainer" *ngIf="!isLoading">
        <h3>Checkout</h3>

        <div class="infoContainer">
            <!-- Payment Info -->
            <div class="orderInfoContainer">
                <span>1</span>
                <span>Order Summary</span>
                <div class="orderInfo">

                    <div class="orderInfoText">
                        <span class="orderText">Items:</span>
                        <span class="orderText">{{formatPreis(summe)}}€</span>
                    </div>

                    <div class="orderInfoText">
                        <span class="orderText">Packing:</span>
                        <span class="orderText"> 0.00€</span>
                    </div>
                    <div class="orderBreaker"><span></span></div>

                    <div class="orderInfoText">
                        <span class="orderTextLarge">Order Total:</span>
                        <span class="orderTextLarge">{{formatPreis(summe)}}€</span>
                    </div>
                </div>

                <button class="changeButton" (click)="onNavigate('Cart')">Check</button>
            </div>

            <div class="lineBreaker"><span></span></div>
            <!-- Adress container -->
            <div class="adressContainer">
                <span>2</span>
                <span>Delivery address</span>
                <div class="address">
                    <span class="addressInfo">{{currentUser.vorname}} {{currentUser.nachname}}</span>
                    <span class="addressInfo">{{currentUser.strasse}}</span>
                    <span class="addressInfo">{{currentUser.stadt}}</span>
                    <span class="addressInfo">{{currentUser.land}}</span>
                </div>
                <button class="changeButton">Change</button>
            </div>

            <div class="lineBreaker"><span></span></div>
            <!-- PaymentMethod -->
            <div class="paymentContainer">
                <span>3</span>
                <span>Payment method</span>
                <div class="payment">
                    <span class="paymentInfoLarge">RichStore:</span>
                    <span class="paymentInfo">{{formatPreis(currentUser.saldo)}} €</span>
                    <!-- <span class="paymentInfo">Invoice address: <br> Same as delivery address</span> -->
                    <span class="paymentInfo">Add a gift card or promotion code</span>
                    <div class="giftContainer">
                        <input type="text" placeholder="Enter Code" class="giftInput">
                        <button class="applyButton">Apply</button>
                    </div>
                </div>
                <button class="changeButton">Change</button>
            </div>
        </div>

        <div class="lineBreaker"><span></span></div>

        <!-- Pay Container -->
        <div class="payContainer">
            <div class="usageContainer">
                <span class="paymentInfo">
                    By placing your order you agree to our
                    <span class="darkBlue link">Conditions of Use & Sale.</span>
                    Please see our
                    <span class="darkBlue link">Privacy Notice,</span>
                    our
                    <span class="darkBlue link">Cookies Notice</span>
                    and our
                    <span class="darkBlue link">Interest-Based Ads Notice.</span>
                </span>
            </div>
            <button class="buyButton" (click)="confirmPurchase()">Buy now</button>
        </div>

        <div class="purchaseContainer" *ngIf="pruchased != 'none' ">
            <div class="errorContainer" *ngIf="pruchased == 'error' ">
                <img src="assets/Icons/Error.png" alt="" class="purchaseIcon filterError">
                <span class="purchaseText">Error: You don't have enough money to purchase these items !</span>
            </div>

            <div class="successContainer" *ngIf="pruchased == 'success' ">
                <img src="assets/Icons/Success.png" alt="" class="purchaseIcon filterSuccess">
                <span class="purchaseText">Success ! You will be redirected to "Your Orders" in
                    {{redirectCounter}}s</span>
            </div>
        </div>

    </div>
</div>